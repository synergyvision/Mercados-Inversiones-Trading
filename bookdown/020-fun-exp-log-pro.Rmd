# Funciones exponenciales y logarítmica y progresiones

## Función exponencial

```{definition, label=funexponencial}
Dado un número real positivo $b$, se llama función exponencial en la base $b$ a la función expresada
como $f(x) = b^x$.
```

En este caso la variable independiente $x$ se llama exponente, y la constante $b$, base. El dominio de la función exponencial es $(−\infty, \infty)$, y el recorrido es $(0, \infty)$. Las propiedades de la función exponencial son las siguientes: para $b$ > 0, $a$ > 0 y todo $m$ y $n$, números reales.

i) $b^m>0$

ii) $b^mb^n=b{m+n}$

iii) $b^{-n}=\frac{1}{b^n}$

iv) $\frac{b^m}{b^n}=b^{m-n}$

v) $(b^m)^n=b^{mn}$

vi) $a^mb^m=(ab)^m$

vii) $\frac{a^m}{b^m}=\left(\frac{a}{b}\right)^m$

Hay dos bases que son las más frecuentadas: cuando $b=e=2.718281828$ y cuando $b=10$. Estas se denotan $e^x$ y $10^x$.
La función exponencial tiene una fórmula general:$\mathbf{y=Ab^{ax}}$, siendo $A$ y $a$ constantes y $b$ la **base**. Tomando en cuenta que en la mayoría de las veces no se conoce la base de la función, se debe hacer una regresión para hallar la funcióin; la funcion toma la forma $\mathbf{y=Ab^x}$, donde $A$ es un coeficiente y $b$ es la base.

```{example, label=exm2-1}

Las ganancias de una empresa en 1998 fueron \$ 500 millones, y en el 2005, \$ 630 millones. Si las ganancias
de esa empresa crecen exponencialmente, estimar las ganancias para el 2008.
```

```{solution, label=sol2-1}

Sea $G(t)$ la función de ganancias que depende del tiempo $t$ en años. Esta función tendrá la forma:
$\mathbf{G(t) = ke^{at}}$, donde $k$ y $a$ son constantes cuyos valores deben determinarse con base en los valores conocidos de la función.

Para facilitar el manejo de los datos, tomemos 1998 como el año cero, y así el 2005 será el año
siete y, finalmente, el 2008 será el año diez. Con este cambio de notación, al reemplazar en la función
tenemos:

$500=G(0)=Ke^0=K$

Luego, $k=500$, y 

$630=G(7)=500e^{7a}$

Así que $e^{7a}=\frac{63}{50}$, de tal manera que:

$G(20)=500e^{20a}=500(e^{7a})^\frac{20}{7}=500(\frac{63}{50})^\frac{20}{7}=967.700$ millones de pesos, y estas serán las utilidades estimadas o proyectadas para el 2008.
```

En R:

Para la programación en R de dicha operación, se pueden generar funciones. En este case, se les presentará dos maneras de hacerlo:

1) Escribir una función donde solo se requiera asignar los valores a las variables:
```{r}
funsol2_1_1<-function(t,a,k){ #Se le asigna un nombre, se le indica que es una función y se escribe la operación.
  k*exp(a*t)
}
funsol2_1_1(20,log(63/50)/7,500) #Se le indican los valores a éstas.
```
2) Escribir una función donde la variable sea el tiempo.
```{r}
funsol2_1_2<-function(t){ #Se escribe en función de t.
  a<-log(63/50)/7 #Se le asigna el valor previamente adquirido del despeje a su respectiva variable.
  500*exp(a*t)
}
funsol2_1_2(20) #Dependiendo del tiempo asignado, se obtiene el resultado de las ganancias. Se puede probar con 7 o con 0.
```

```{example, label=exm2-2}
Se sabe que la población de una ciudad está dada (en millones de habitantes) por la expresión siguiente:
$(t) = 2e^{0,15t}$
donde $t$ está dada en años, desde 1986

Determinar:

a) La población proyectada para el 2006.

b) El crecimiento porcentual de la población cada año.
```

```{solution, label=sol2-2}

a) Para determinar la población proyectada para el 2006, simplemente calculamos la función en $t=20$(tomando 1886 como el año cero); entonces: 

$P(20)=2e^{0.15(20)}=40.170$
```

Para la programación en R de dicha operación, se puede generar una función.
```{r}
funsol2_2_1<-function(t){ #Se escribe en función de t.
  a<-0.15 #Se le asignan sus respectivos valores a sus respectivas variables.
  k<-2
  k*exp(a*t) 
}
funsol2_2_1(20) #Se le asigna el valor a la variable.
```

```{solution}
b) Del cálculo diferencial se sabe que la variación porcentual de una función f(x) está dada por:

$\Delta\%=\frac{f'(x)}{f(x)}\times 100$

Por tanto, para nuestro caso tenemos:

$\Delta\%=\frac{p'(t)}{p(t)}\times 100=\frac{0.3e^{0.15t}}{2e^{0.15t}}\times 100=0.15\times 100=15\%$

que corresponde al coeficiente del exponente de la función dada.
```

Para la programación en R debemos primero, a mano, calcular el valor de la derivada de P'(t).

$$
\begin{array}{ll}
P'(t)&=2'e^{0.15t}+2e(^{0.15t})'\\

&=0(e^{0.15t})+2(e^{0.15t}\times 0.15)\\

&=2\times 0.15\times e^{0.15t}\\

P'(t)&=0.3e^{0.15t}
\end{array}
$$

Una vez obtenido el valor de la derivada, se escribe una función, evaluada en t
```{r}
P<-function(t){ #Se escriben dos funciones, para luego "llamarlas" en la funsol2_2_2, para obtener el resultado.
  2*exp(0.15*t)
}
DP<-function(t){
  0.3*exp(0.15*t)
}
funsol2_2_2<-function(t){
  (DP(t)/P(t))*100
}
paste0(funsol2_2_2(1),"%") #La función paste es para comentar el valor obtenido con el porcentaje (%) al lado.
```

Cuando una cantidad sube periódicamente el mismo porcentaje es común dentro de las mateáaticas financieras. Supongamos que se inicia con una cantidad $P$ y que en cada período $t$ se sucede un aumento de $r\%$ sobre el valor inmediatamente anterios; entonces se formaría la siguiente sucesión de valores:

$$
\begin{array}{ll}
t=0\quad\quad P\\
t=1\quad\quad P+rP=P(1+r)\\
t=2\quad\quad P(1+r)+rP(1+r)=P(1+r)^2\\
t=3\quad\quad P(1+r)^2+rP(1+r)=P(1+r)^3
\end{array}
$$

Y así sucesivamente hasta llegar en un tiempo $t$ cualquiera a un valor de $P(1 + r)t$. Esta función exponencial en la base $(1 + r)$ se utilizará más adelante en el manejo del interés compuesto, y será determinada en el capítulo 3.

```{example, label=exm2-3}

Hallar el valor de $r$ tal que: 

$300.671=100.000(1+r)^{32}$
```

```{solution, label=sol2-3}

La expresión dada equivale a $(1+r)^{32}=3.00671$. Tomando la raíz de treinta y dos en ambos lados obtenemos:

$1+r=(3.00671)^{\frac{1}{32}}=1.035$

Por tanto:

$r=0.035$

Aplicando la raíz once en ambos miembros llegamos a: 
$r=0.0278$ aproximadamente
```

En R:

```{r}
funsol2_3_1<-function(){
  
  (3.00671)^{1/32}-1 #Resultado del despeje de r.
}
round(funsol2_3_1(), digits=3) #La función round() se utiliza para redondear a la cantidad de digitos deseados.
```

```{example, label=exm2-4}
Para qué valor r se cumplirá la siguiente igualdad:
  
$630.000(1+r)^{15}=465.957(1+r)^{26}$
```

```{solution, label=sol2-4}
La igualdad es equivalente a:
  
$\frac{630.000}{465.957}=\frac{(1+r)^{26}}{(1+r)^{15}}$
  
O sea:
  
$1.35056=(1+r)^1$
```

En R:

```{r}
funsol2_4_1<-function(){
  
  (1.35056)^{1/11}-1
}
paste0(funsol2_4_1(), " aproximadamente") #La función paste es para comentar el valor obtenido con el "aproximadamente"
```

En muchos casos se debe proyectar hacia el futuro basándose en al historia de valores de dicha variable. Esto se conoce como **regresión exponencial**, que se trata de cursos de estadística.

```{example, label=exm2-5}

Supongamos que la población de un país ha tenido la siguiente variación de población como se muestra en la tabla uno, en los últimos cinco años.

Hallar la función exponencial que más se ajuste a los datos anteriores y determinar en qué porcentaje ha aumentado la población anualmente.
```

```{solution, label=sol2-5}
Para facilitar el manejo de los datos anteriores, llamaremos uno al año 1994, dos a 1995 y así sucesivamente; y utilizaremos el programa correspondiente para hallar una función de la forma:

$Y=ab^x$

donde x es el año e Y el número de habitantes. Se trata de hallar los valores de a y b. Ejecutando en la calculadora la regresión exponencial anterior, obtenemos:
```

```{r, warning=FALSE}
x<-seq(1,5)
y<-c(22,23,25.6,28.6,32)
data<-data.frame(x,y)
model<-nls(y~a*b^x, data = data)
coef(model)
```

Así, la función exponencial que más se ajusta a los datos dados es la siguiente:

$Y=19,44256059(1,101562846)^x$

La población habrá aumentado cada año en aproximadamente el $10,156\%$.

Se deberá manejar cualquiera de los programas y métodos de la tecnología para calcular regresiones (lineales y exponenciales), porque se utilizará en el futuro para estimar tendencias de flujo de caja.

## Función Logarítmica

```{definition, label=funlogaritmica}
Dado un número real positivo $b$, se llama función logarítmica en la base $b$ y se denota $log_b(y)$, a la función inversa de $\mathbf{y = b^x}$.
```

De esta manera, las funciones exponencial y logarítmica son inversas entre sí. El dominio de las función logarítmica es $(0,\infty)$ , y el recorrido, $(-\infty, \infty)$.

Para las dos bases anotadas anteriormente, las funciones logaritmicas se denotan así $ln$\ si la base es $e$, y se llama logarítmo natural o neperiano; y log si es de $base=10$.

Las **propiedades de la función logarítmica**, expresadas para el logaritmo natural, son las siguientes, para $\mathbf(M)$ Y $\mathbf(N)$.

i) $ln(M\times N)=lnM+lnN$

ii) $ln\frac{M}{N}=$

iii) $ln\ M^r=r\ ln\ M$

iv) $ln\ 1=0$

v) $ln\ e=1$

Del hecho de ser inversas se desprenden algunas relaciones fundamentales entre ellas:

i) $y=e^x\longleftrightarrow x\ =\ ln\ y$

ii) $e^{1nt}=t$

iii) $ln\ e^u=u$

Sabiendo esto, desarrollemos algunos ejemplos (ayúdense con la calculadora):

```{example, label= exm2-6}
El precio de venta o de mercado de una maquinaria puede expresarse como: $V = \$10.000 e^{−0,1t}$
donde $t$ es el tiempo de antigüedad de la máquina medido en años.

Preguntas:
  
a) ¿cuál será el valor de la máquina al cabo de ocho años?; y,

b) ¿en qué momento la máquina tendrá un valor de venta de \$ 6.053,3?
```

```{solution, label= sol2-6}

a) El valor de la máquina al cabo de ocho años estará dado por:
  
  $V(8)=\$10.000e^{-0,1(8)}=\$4.493,3$
```

En R:

```{r}
funsol2_6_1<-function(t){
  10000*exp(-0.1*t)
}
paste(funsol2_6_1(8), "$")
```

```{solution}    
b) En este caso\ $V=\$6.065,3$\ representa el valor de la máquina de $t$ años, de tal manera que al reemplazar este valor en la función de valor de la máquina se tiene:
  
  $6.065,3=10.000e^{-0,1t}$
  
  o sea:
    
  $e^{-0,1t}=0,060653$
  
  tomando el logaritmo natural en ambos miembros de la igualdad obtenemos:
    
  $Ln\ e^{-0,01}=ln(0,60653)$
    
  Y aplicando la relación (1-3) al miembro de la izquierda de esta igualdad, se llega a:
  
  $-0,1t=-0,5$
      
  Es decir, $t=cinco años$ es la respuesta a la pregunta del literal $(b)$ de este ejemplo.
```

Para la programación en R debemos, a mano, despejar la $t$ de la ecuación anterior.

$$
\begin{array}{rl}
10000*exp(-0.1*t)&=v\\
exp(-0.1*t)&=\frac{v}{10000}\\
-0.1*t&=log(\frac{v}{10000})\\
t&=-(\frac{log(\frac{v}{10000})}{0.1})
\end{array}
$$
```{r}
funsol2_6_2<-function(v){ #Se escribe la función para ser evaluada en v.
  -(log(v/(10000))/0.1)
}
round(funsol2_6_2(6065.3), digits=0) #Se usa el round() para redondear el resultado a 0 decimales.
```

```{example, label=exm2-7}
La expresión $3.000\left(\frac{(1 + 0,02)n − 1}{0,02}\right)$ representa, como lo veremos en el capítulo 4, el valor total acumulado después de realizar $n$ depósitos de $3.000$ cada uno en una cuenta de ahorros que paga un interés del 2% mensual. Si el total acumulado asciende a $96.090,9$ ¿cuántos depósitos se han realizado?
```

```{solution, label=sol2-7}
Tenemos que:
$96.090,9 = 3.000 [(1,02)n − 1] \frac{1}{0,02}$ 
  
O sea:
  
$(1,02)n = 1,640606$

Tomando el logaritmo natural en ambos miembros de la igualdad obtenemos:
  
$Ln(1,02)^n = ln(1,640606)$
  
Por la relación (1−2):
  
$n\times ln(1,02) = ln(1,640606)$
  
de donde:
  
$n = \frac{ln(1,640606 )}{ln(1,02)} = 25$
  
Es decir, después de veinticinco depósitos de \$ 3.000 cada uno tendremos la suma de \$ 96.090,9, según las condiciones del ejemplo.
```

Para la programación en R debemos, a mano, despejar la $n$ de la ecuación anterior.

$$
\begin{array}{rl}
96090.9&=3000[(1.02)6^n-1]\frac{1}{0.02}\\
(1.02)n&=1.640606\\
ln(1.02)^n&=ln(1.640606)]\\
n\times ln(1.02)&=ln(1.640606)\\
n&=\frac{ln(1.640606)}{ln(1.02)}
\end{array}
$$
```{r}
funsol2_7_1<-function(){
  log(1.640606)/log(1.02)
}
funsol2_7_1()
```

```{example, label=exm2-8}
Hallar el valor $n$ tal que: $ln(3−2n) − 2ln(n) = 0$
```

```{solution, label=sol2-8}
  La ecuación del problema es equivalente a:
  
  $ln(3 − 2n) − ln(n)^2 = 0$

  La cual, a su vez, podemos escribir como:
    
  $ln [(3 − 2n)/n^2] = 0$
  
  De acuerdo con otra propiedad de la función ln, la expresión anterior es equivalente a:
    
  $(3 − 2n)/n^2 = e^0 = 1$
  
  o sea que:
    
  $n^2 + 2n − 3 = 0$
  

  que corresponde a una ecuación de segundo grado cuyas raíces son:
    
  $n = 1$ y $n = −3$
  
  Sin embargo, la solución al problema original es solo n = 1, pues para n = −3 no existe el logaritmo. El lector debe          resolver el mismo problema utilizando otras propiedades de la función logarítmica.

```

Para la programación en R debemos, a mano, operar y aplicar teoría de logaritmos.

$$
\begin{array}{rl}
ln(3-2n)-2ln(n)&=0\\
ln\left[\frac{(3-2n)}{n^2}\right]&=0\\
(\frac{3-2n}{n^2})&=e^0=1\\
n^2+2n-3&=0\\
\end{array}
$$
```{r}
funsol2_8_1<-function(a,b,c){
  (-b+sqrt(b^2-4*a*c))/2*a
}
funsol2_8_1(1,2,-3)
funsol2_8_2<-function(a,b,c){
  (-b-sqrt(b^2-4*a*c))/2*a
}
funsol2_8_2(1,2,-3)
```

```{example, label=exm2-9}
Con la expresión $P\times e^{in}$ se calcula el valor total acumulado en una cuenta en la que el interés del i% se capitaliza continuamente, y $n$ es el número de años transcurridos desde el depósito de la cantidad $P$. Con base en esta expresión, hallar el número de años para que el total acumulado sea una cantidad $F$.
```

```{solution, label=sol2-9}
Tenemos $F = P\ e^{in}$, en la cual debemos hallar el valor de $n$. Podemos escribir la ecuación anterior como:
  
$e^{in} = F/P$
  
Tomando el logaritmo natural en ambos miembros de la igualdad, tenemos:
  
$Lne^{in} = ln(\frac{F}{P})$

De acuerdo con la expresión $(1-3)$, se tiene: 
  
$in = ln(\frac{F}{P})$
  
O sea que:
  
$n=(\frac{1}{i})\times ln(\frac{F}{P})$
```


```{example, label=exm2-10}
La función de costos de una determinada empresa viene dada por $C(t) = 5.000 − A\ e^{bt}$ (expresado en miles de pesos), donde $A$ y $b$ son constantes y $t$ es el tiempo medido en meses. Si el costo original $(t = 0)$ fue de \$4.400.000 y el costo en el cuarto mes es de \$4.200.000, determinar el costo a los quince meses.
```

```{solution, label=sol2-10}
Lo primero que debe hacerse es determinar la función que cumpla las condiciones expresadas en el problema, o sea, que $C(0) = 4.400$ millones y $C(4) = 4.200$ millones; para ello debe determinarse el valor de las constantes $A$ y $b$. Esto lo logramos a partir de:
  
$4.400 = C(0) = 5.000 – Ae^{b(0)} = 5.000 − A$
  
Por tanto:
  
$A = 600$
  
Además:
  
$4.200 = C(4) = 5.000 − 600 e^{b(4)}$
  
de donde:
  
$e^{4b} = 1,3333$
  
Tomando el logaritmo natural en ambos miembros de la igualdad obtenemos: 
  
$Ln e^{4b} = ln(1,3333)$

$b = \frac{ln( 2)}{4} = 0,0719205$
  
Así, la función tendría la forma:
  
$C(t) = 5.000 − 600 e^{0,0719205t}$
  
Y, por tanto, el costo a los quince meses será de:
  
$C(15) = 5.000 − 600 e^{0,0719205(15)} = 3.235.300$
  
Esto quiere decir que el costo a los quince meses será de $ 3.235.300 millones.
```

Para la programación en R debemos transcribir la última ecuación del despeje anterior.

```{r}
funsol2_10_1<-function(t){
  5000-600*exp(0.0719205*t)
}
funsol2_10_1(15)
```

```{example, label=exm2-11}
Si la variación del monto de una inversión en cualquier período $t$ es proporcional al monto en ese momento, hallar el valor total acumulado en cualquier momento.
```

```{solution, label=sol2-11}
Sea $P$ el valor del monto en cualquier momento $t$; entonces, la variación en ese tiempo será $dP/dt$. 

Ahora, si esta variación es proporcional al monto $P$, obtenemos que:
  
$\frac{dP}{dt} = kP$, donde $k$ es la constante de proporcionalidad. 

Para resolver esta ecuación, primero separamos las variables así:
   
$\frac{dP}{P} = kdt$
 
Integrando en ambos miembros, llegamos a:
  
$\int \frac{dP}{P} =\int kdt$

$lnP = kt + c$, donde $c$ es una constante de integración, y entonces:
  
$P = e^{kt+c} = e^{kt} e^c = Ae^{kt}$
  
donde $A = ec$ y $k$ son constantes; por tanto, el total acumulado en cualquier momento $t$ será: 

$P(t) = Ae^{kt}$

que es una función exponencial en la cual la variación porcentual es constante al k%.
```

Para la programación en R debemos, a mano, operar, aplicar teoría de logaritmos e integrales.

$$
\begin{array}{rl}
\frac{P'}{P}&=kP\\
\frac{P'}{P}&=kdt\\
\int \frac{P'}{P}&=\int kdt\\
ln(P)+c_1&=kt+c_2\\
ln(P)&=kt+c_1-c_2\\
ln(P)&=kt+C\\
e^{ln|(P)}&=e^{(kt+C)}\\
P&=e^{(kt+C)}\\
P&=e^{kt}\times e^C\\
P&=Ac^{kt}\\
P(t)&=Ac^{kt}
\end{array}
$$
```{r}
funsol2_11_1<-function(A,k,t){
  A*exp(k*t)
} #No se asignan valores a las incógnitas, debido a que solo se busca despejar el valor, más no obtenerlo.
```

```{example, label=2-12}
Si una cantidad crece exponencialmente variando en el 10\% cada mes, ¿al cabo de cuántos meses habrá triplicado su valor inicial?
```

```{solution,label=sol2-12}
Sea V_0 el valor inicial de esa cantidad. Entonces, al cabo de $t$ meses tendrá un valor de: 
  
$V_t = V_0 e^{0,1t}$

Se trata de hallar el valor de $t$ para el cual se cumple que:
  
$V_t=3V_0$

O sea:
  
$V_0e^{0.1t}=3V_0$

Es decir:
  
$e^{0.1t}=3$

Tomando el logaritmo natural en ambos lados de la igualdad, obtenemos:
  
$lne^{0.1t}=ln3$

$0.1t=ln3$
  
$=\frac{ln3}{0.1}=11$
  
Al cabo de once meses, el valor original se habrá triplicado.
```

Para la programación en R debemos, a mano, operar y aplicar teoría de logaritmos.

$$
\begin{array}{rl}
V_t&=V_0e^{0.1t}\\
V_t&=3V_0\\
V_0e^{0.1t}&=3V_0\\
e^{0.1t}&=3\\
lne^{0.1t}&=ln3\\
0.1t&=ln3\\
t&=\frac{ln3}{0.1}
\end{array}

$$

```{r}
funsol2_12_1<-function(){
  log(3)/0.1
}
round(funsol2_12_1(), digits=0) #Se usa la función round() para redondear.
```

```{example, label=2-13}
Hallar el valor de n que cumpla con la siguiente igualdad:
  
$702.507=\frac{45.6000}{0.035-0.02}\left[1-\left(\frac{1.02}{1.035}\right)^n\right]$
```

```{solution, label=sol2-13}
Esta ecuación, que encontraremos más adelante en los flujos de caja que crecen en forma geométrica (capítulo 5), puede resolverse de dos formas: una mediante el programa correspondiente a gradientes geométricos crecientes, la otra por el álgebra y la función logarítmica que corresponda al siguiente procedimiento:
  
  El objetivo es despejar el factor $\left(\frac{1.02}{1.035}\right)^n$, y esto es igual a:
  
  \left(\frac{1.02}{1.035}\right)^n=(0.7689121711)

  Tomando el logaritmo en ambos lados de la igualdad, obtenemos:
    
  ln\left(\frac{1.02}{1.035}\right)^n=ln(0.7689121711)
  
  $\therefore n=\left(\frac{ln(0.7689121711)}{ln(\frac{1.02}{1.035})}\right)=18$
    
  Así, el valor de la variable n que cumple la ecuación dada en el ejercicio es n = 18.
```

Para la programación en R debemos transcribir la última ecuación del despeje anterior.

```{r}
funsol2_13_1<-function(){
  log(0.7689121711)/log(1.02/1.035)
}
round(funsol2_13_1(), digits=0) #Se usa la función round() para redondear.
```

